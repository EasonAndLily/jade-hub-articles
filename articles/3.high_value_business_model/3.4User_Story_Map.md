# 用户故事地图

![user-story-map.png](https://s1.locimg.com/2024/03/02/9582b3f3873b0.png)

在软件开发领域，存在一条让人极为不爽的真理：***想要开发的功能远比你能投入的资源多！***

在软件开发领域，最常见的错误理念之一就是，努力加快输出速度。这个理念的假设是，如果我们有太多东西要做，做的更快是有帮助的，不是么？真的是这样么？想要跑得快的前提是先得跑的对！更快的开发软件确实是一个好主意，只不过无法从根本上解决问题。

如果能正确理解游戏规则，你会发现你的工作不是开发更多而是开发开发更少的功能：***最小化输出，最大化成果和影响！*** 这意味着你需要密切关注你解决问题的人，不仅包括哪些选择采购软件以解决公司问题的人，还包括使用软件的用户！

而用户故事地图就是一种让软件团队聚焦业务价值，最小化输出，最大化成果和影响的方法之一！

## 用户故事

“用户故事”这个词可谓是相当简明扼要了，简直一语中的，包含两个要素“用户”和“故事”。

所谓用户，就是能够真正使用软件产品的人，这并不等同于“客户”。谁是你开发软件产品的用户？哪一类用户会使用你的产品？这是一个真正值得思考的问题。前面章节中说的“用户画像”就是帮助你了解产品用户的一种具象化方式。想要制作用户故事，就必须有明确的用户画像。

何为“故事”？这个问题我最早是在初中语文的课堂上提出的，当时需要对比“故事”和“小说”的区别，记得当时语文老师给出了经典回答：“小说是对情节的描述，故事是对情节的叙述！”。所以，“故事”不要求你花费太多的文字语言来描述场景的精彩程度，也不需要你来花费心思来塑造人物性格；故事要求的是你需要去除多余的细节，考虑情节的发展逻辑，这才是关键！

> 皇帝死了，皇后跟着死了。----这是故事
>
> 皇帝死了，皇后悲伤过度而死。 ----这是小说

所以，用户故事就是：“用户为了达成某种目的，对主要活动的叙述！”，也就是谁因为什么原因做什么事情！简短扼要的描写即可，不需要深究细节和场景！

### 故事三要素

“谁因为什么原因做什么事情！”，提炼出来就是“who、why、what”。这在在软件开发过程中被作为描述需求的一种表达形式。为了规范用户故事的表达，便于沟通，用户故事通常的表达格式为：作为一个<用户角色>, 我想要<完成活动>, 以便于<实现价值>。

```html
<角色>Who: 谁使用 （尽可能具体）

<活动>What:要完成什么活动 （每个用户故事都是唯一的；是主动语态而非被动语态）

<价值>Value:为什么要这么做，价值是什么
```

常用表达式：

![who-what-why.jpg](https://s1.locimg.com/2024/03/03/7abf114a0c280.jpg)

### 3C原则

用户故事的描述信息以传统的手写方式写在纸质卡片上，所以Ron Jeffries(2001)对这三个方面称为3C：对话(Conversation)、卡片(Card)和确认(Confirmation)。

#### 交谈(Conversation)

我最常说的一句话是：软件研发是一场沟通交流的活动，沟通交流是促进知识在团队中流动的唯一方式！

毫无疑问，用户故事背后的细节来源于和客户或者产品负责人的交流沟通；确保各方对故事的理解正确。通过对话的形式，一方面确保大家对该故事理解一致，统一语言；另一方面反应了故事的价值，让团队成员和利益相关者对该故事呈现的价值保持一致。

![conversation.webp](https://s1.locimg.com/2024/03/03/ae32d210c16a7.webp)

#### 卡片(Card)

敏捷宣言里面有一句常常被误解的话：“可工作的软件高于面面俱到的文档！”。这使得很多人误以为敏捷是不需要写文档的！内行人都知道这是一个笑话，因为用户故事驱动的过程需要很多文档作为依据，只不过这些文档不再是传统需求文档那样罢了！

敏捷文档不是面面俱到的文档，也不是像一本书一样的软件规格说明，而是对达成一致理解的记录，包括讨论，画图，记录，使用的便签和故事卡。在讨论中引入的文档，会用记号笔高亮标记，潦草记录一些备忘。这种文档注重互动，充满活力！请记住，最重要的东西不是在文档中记录了什么，而是我们在阅读文档的时候想起了什么！

所以在交谈讨论的过程中，使用视觉化的方式(比如卡片，通常是一个便利贴之类的)有助于我们快速的理解当前讨论的重点，调整自己的想法。所以用户故事卡片是我们对故事达成一致理解后的文档记录。当正式进入研发时，某个研发拿到这个卡片，他就会想起来大家就这个卡片激烈讨论的场景和某个人为了给大家说明该故事的价值而举的一个非常形象生动的例子！

通常，我们会很好的利用卡片的两面：
* 卡片正面格式：As a (Role)，I Want to (Action), So that (Benefit)
* 卡片背面格式：Given…When…Then, 这是对卡片正面更加具象化的描述。

![card.webp](https://s1.locimg.com/2024/03/03/b935b2e5c4270.webp)

#### 确认(Confirmation)

通过验收测试确认每个用户故事被正确地完成了。这块内容我们在后面的文章中详细介绍！

### 举个例子

我们以一个博客网站的登录为例，请大家思考一下，什么用户需要登录到博客网站里面？他们登录的目的是什么呢？

```html
-------卡片正面-------------------
As a 作者
I want to 登录到该博客中
So that 我能够在该博客里面发表一篇文章

-------卡片背面-------------------
Given：我已经是该博客的有效用户
When：我准备发表新文章时
Then：我需要通过用户名和密码的方式登录
When：我通过有效的用户名和密码登录时
Then：我能够登录到博客系统后，能够发表文章
```

所以，登录不是该用户的目的，发表文章才是，要发表文章所以才需要用户进行身份认证！

## 用户故事地图

在敏捷软件开发中，大型的需求通过“用户故事”进行切分，使得软件开发项目的过程进一步可视化。通过故事来组织开发产品，每一个故事实现都和整个软件完全集成，每个人都可以看到软件产品在不断的成长。用户可以理解故事，产品经理和开发决定下一个迭代开发哪个故事来管理软件项目，可视化的大幅提升，使得用户可以深入的参与到项目中来，共同验证软件的可行性。

然而，需求拆分本身也有很多负面的影响，容易丢失软件的全景便是其中之一，开发工作进展到后期，你可能得到的是一堆无法拼接到一起的碎片。也可能由于过度陷入细节而丢掉用户诉求的本质，最终构建出用户不需要的产品。

***用户故事地图是一门在需求拆分过程中保持全景图的技术！***

全景图可以帮助团队和用户有效沟通，帮助参与其中的人员避免开发非必要的特性，也为一致的用户体验提供了基础。


### 绘制用户故事地图

![user-story-map-detail.png](https://s1.locimg.com/2024/03/03/5a9e0ecceabf3.png)