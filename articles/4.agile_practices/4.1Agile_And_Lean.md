# 敏捷与精益

![lean-agile.png](https://img.picui.cn/free/2024/06/30/6680efa96b4fa.png)

上个世纪八九十年代，软件开发遵循者严格线性开发模式，按照固定的阶段依次进行，每个阶段都有明确定义的输入和输出；一个产品从设计之初，就注定了其最终形态，经过大半年甚至几年的研发，最终一次性上线给用户使用。

然而，这种研发模式存在着致命的问题：
1. 用户和需求都是不断变化的，几年前设计的产品放在今天可能已经过时了，任何产品经理都很难预料需求的变化；
2. 任何基于估算的计划很难完全按时落实，任何一个阶段的延期都会对下个阶段造成影响，产品发布日期一推再推，发布风险严重后置；
3. 团队协作困难，当产品在设计阶段时，产品研发人员无事可做，只能等待，当产品进入研发阶段，产品设计人员将开启休假计划。。。

为了解决这些问题，2001年2月，Martin Fowler，Jim Highsmith等17位著名的软件开发专家齐聚在美国犹他州雪鸟滑雪圣地，举行了一次敏捷方法发起者和实践者的聚会。在这次会议上面，他们正式提出了Agile(敏捷开发)这个概念，并共同签署了《敏捷宣言》。

敏捷研发倡导**以客户为中心，快速响应变化，通过迭代和增量的方式来快速交付高质量的产品和服务，它强调团队合作，快速反馈和不断改进，以便在较短的时间内满足客户需求。**

下面我们通过一个造车的例子来说明瀑布开发模式和敏捷的区别：

客户需要一辆车，如果使用瀑布的模式来交付，就必须要先设计好这个车的整个功能和样式，然后从轮胎开始，按照规定逐步实现，大概几年之后，客户才能使用这辆车。如果使用敏捷的方式，就先需要思考客户为什么会需要一辆车，是想更快的到达目的地？简单起见，先设计一个滑板给客户使用，客户使用后发现不够快，就提供一辆自行车，后面提供摩托车，最后才设计成小轿车，如果还不够快怎么办？给客户飞机？在这个过程中，客户在很短的时间内就能够使用产品，能够对自己使用的感受与设计者进行反馈，设计者根据反馈提供更好的解决方案，这极大的降低了项目失败的风险，更好的服务了客户。

![Agile-vs-Waterfall.png](https://img.picui.cn/free/2024/06/30/6680f5c17a7fd.png)

## 敏捷宣言

上面我们说到了[《敏捷宣言》](https://agilemanifesto.org/iso/zhchs/manifesto.html),这是敏捷软件研发的革命性纲领，涵盖了敏捷的核心理念，在这里我们有必要去深入理解和体会。

![agile_manifesto.jpg](https://img.picui.cn/free/2024/07/07/668a001b2ec1e.jpg)

本质上，敏捷宣言就四句话加上下面的一行小字，下面我们来逐个理解这几句话：

#### 个体与互动高于流程和工具

在大型组织中，存在着非常多的流程和工具来把控项目节奏，同时存在着许多精于流程管理和使用工具的人，这些人使用这些制度约束着项目，确保项目在正确的巷道上推进。诚然，我们并不否认这些流程，工具和人的价值，它们无法替换有能力的个体和高效的互动，个体的技能和他们之间的互动是解决问题，深入思考业务，隐形知识传递的关键途径。

这就意味着，敏捷团队应该是：**重视个体的意愿和能力的提高，同时要重视团队内和团队间的沟通、合作，构建自组织团队，定期反思、持续提高和改进**。

#### 工作的软件高于详尽的文档

在软件研发中，一直存在一个争论不断的话题，文档到底有没有用？认为有用的原因是，文档能记录项目的背景，业务逻辑，软件架构，软件变更记录，对知识传递起到不可或缺的作用。相反的观点认为，详尽的文档总是滞后的，不应该把大力气放在写文档上面，我们应该聚焦于本身可工作的软件，根据市场反馈来迅速改变，而不是对着面面俱到的文档规定而死板的遵守！

想要回答上面争论的问题，很重要的一点就是从价值的角度出发，软件研发的价值是什么？是给客户交付面面俱到的文档？软件开发的目标和进度衡量标准都是交付可工作的软件，给客户带来价值，让客户满意。意味着已集成、已测试、潜在准备发布的产品才是关键度量，它能够有效地跟踪项目进度和对发布做出决策。文档就是为工作的软件做辅助，并不是契约纲领，同时文档也不等同于知识传递，文档最多只能传递一些显性知识。

所以，这就要求敏捷团队，从简单设计入手，快速验证市场反馈，通过迭代增量的方式，逐步构建产品，随着时间推进，逐步演进产品架构，追求技术卓越，做出用户满意的产品！

#### 客户合作高于合同谈判

合同谈判并不是不重要，敏捷团队应该超越谈判并尝试提升与客户的合作，建立以合作为基础的关系，而不是通过契约或手续来约束推进的事项。作为软件开发方，我们和客户之间从来不是对立面，不是零和博弈，而应该建立的是双赢的关系，只有为客户创造有价值的产品，团队的付出和劳动才是有价值的，所以在项目过程中我们要做的是客户合作，而不是单纯依赖于最初的一纸合同去谈判。

#### 响应变化高于遵循计划

这句话是误解最多的一句话，是不意味着，市场和客户是不断变化的，那么我们应该放弃制定计划，任何时刻以市场变化为主导，市场和客户要我们做什么，我么就做什么？ 其实不然，敏捷团队的理念认为计划是必要的，但计划必须适应变化，并对计划做持续的调整，避免制作详尽的，长期的计划书。前期花很长时间制定详尽的计划的结果会导致大量的返工。同时，我们需要有足够的计划水平来评估业务需求和对其长期影响的判断。这是一种平衡的艺术。

敏捷研发模式通常以迭代是一个周期，每个迭代都有一个迭代计划，这个计划要求明确和可执行，至少在当前迭代是这样的。除此之外，会有一个粗略的，大概的可行的产品功能和发布计划，这个计划给我们发布最小可行性产品指明大致方向。最后，我们还可能会有一个产品理念/愿景，这个理念是激发团队成员，引领产品走向终极理想的明灯。

最后一句：尽管右项有其价值，我们更重视左项的价值。工具流程、文档、合同和计划对于项目很重要，不可或缺，但是相对来说，个体交互、可以工作的软件、客户合作和及时响应需求变化的价值更大。

## 迭代与增量

相比传统的瀑布开发模式，**敏捷开发的核心是迭代开发（iterative development）。**

那么什么是"迭代开发"呢？迭代的英文是 iterative，直译为"重复"，迭代开发其实就是"重复开发"。

对于大型软件项目，传统的开发方式是采用一个大周期（比如一年）进行开发，整个过程就是一次"大开发"；迭代开发的方式则不一样，它将开发过程拆分成多个小周期，即一次"大开发"变成多次"小开发"，每次小开发都是同样的流程，所以看上去就好像重复在做同样的步骤。

![agile-vs-waterfull2.png](https://img.picui.cn/free/2024/07/07/668a5737b48c4.png)

迭代开发要求将开发分成多个迭代，每个迭代通过"增量开发"（incremental development）的方式来划分。**所谓"增量开发"，指的是软件的每个版本，都会新增一个用户可以感知的完整功能。也就是说，按照新增功能来划分迭代。**

**增量开发加上迭代开发，才算真正的敏捷开发。**

## 敏捷研发流程

![agile-work-process.png](https://img.picui.cn/free/2024/07/07/668a5c4b99f65.png)

将敏捷理念落地的关键是其研发流程，整个研发围绕迭代进行，我们可以简单的将研发流程划分为下面三个阶段：

#### 迭代前

在迭代开始前，通常有下面几种活动：
* **梳理产品需求：** 迭代进行前，通常需要产品经理(PM)根据市场需求，结合产品愿景和业务模型，设计出产品功能列表。在设计完产品功能后，需要根据功能的重要程度，设计好优先级。
* **用户故事拆分：** 当明确了产品功能后，PM/PO将着手对产品功能从用户的角度，进行用户故事拆分，此处不在做过多描述，可以参考[《用户故事地图》](https://jade-hub.com/#/articles/3.3)。
* **最小化可行性产品设计(MVP)：** 有了用户故事地图，我们需要结合产品愿景，挑选出最小化的可工作的软件功能，目的是在最短的时间内，用最少的资源，构建出一个能够满足目标市场核心需求的产品原型。
* **迭代计划排期：** 通常，以周(1~4周)为单价安排迭代，每个迭代需要交付可工作的软件，在迭代开始之前，需要召开迭代计划会，按照优先级，明确该迭代的计划。由PO为大家讲解具体每一个需求，团队成员根据需求的复杂程度评估每个任务的工作量，根据工时算法，来确定当前迭代的冲刺目标(多少个用户故事卡)，并通过迭代看板进行管理。

#### 迭代中

正式进入迭代，团队成员每天按照下面的活动来推进：
* **每日站会：** 团队内部利用每日立会来沟通进度，拉通信息，一般15分钟内结束，开发团队以看板为切入工具，每个成员更新自己的状态和当日计划，同时利用燃尽图和累计流来展示整体进度，实时把控风险。
* **故事卡Kickoff：** 当团队研发人员需要从看板上领取自己需要做的卡时，通过需要通过Kick off的方式进行，此时需要PO，研发和测试人员共同参与，就当前故事卡的业务范围，实现方式已经测试内容进行拉通，达成一致就可以正式实现了。
* **桌面检查(Desk Check)：** 当研发人员实现了某个故事卡，为了确保自己实现的和业务要求的保持一致，应该尽早的展示自己的实现方式，这通过桌面检查的方式进行。此活动由研发发起，在自己本地环境，向PO/测试人员演示实现的功能和遇到的问题，并向PO/测试人员收集反馈。

#### 迭代后

当前迭代安排的所有的故事卡被完成并充分测试，就意味着当前迭代的任务已经结束，增量功能已经开发完毕，但是依然还有一些活动来保证迭代后的任务能正常进行：
* **迭代评审会(ShowCase)：** 在冲刺结束时，团队聚集在一起进行非正式会议，以观看增量演示或检查增量。开发团队向利益相关者和团队成员展示目前处于“已完成”状态的待办事项，以征求他们的反馈意见。
* **迭代回顾会(Retro)：** 回顾会议由敏捷团队检视自身在过去的迭代的表现，包括人 、关系、过程、工具等，思考在下一个迭代中怎么样可以表现得更好，更高效，怎么样可以和团队合作地更愉快。

## 敏捷的收益

上面我们对比了瀑布和敏捷的研发模式的不同，理解了敏捷的价值观，那么到底敏捷给我们带来了什么？笔者认为主要有下面的两点：

#### 1. 早期交付，从而大大降低成本

敏捷开发的第一个好处，就是早期交付，从而大大降低成本。

敏捷通过增量迭代的方式，避免大而全的设计，减少的无效成本的投入，快速将产品推向市场，寻求市场的反馈，将团队的资源聚焦到最重要的事情上，减少了内耗。

对于可盈利的产品来说，尽早的推向市场，尽早的盈利能够极大的减少公司的资金压力，提升团队的信心。

#### 2. 响应变化，降低风险

敏捷开发的第二个好处是，及时了解市场需求，降低产品不适用的风险。

由于敏捷开发可以不断试错，找出对业务最重要的功能，然后通过迭代，调整软件方向。相比传统方式，大大增加了产品成功的可能性。如果市场需求不确定，或者你对该领域不熟悉，那么敏捷开发几乎是唯一可行的应对方式。